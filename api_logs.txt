api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT "MigrationId", "ProductVersion"
api-1  |       FROM "__EFMigrationsHistory"
api-1  |       ORDER BY "MigrationId";
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT "MigrationId", "ProductVersion"
api-1  |       FROM "__EFMigrationsHistory"
api-1  |       ORDER BY "MigrationId";
api-1  | info: Microsoft.EntityFrameworkCore.Migrations[20405]
api-1  |       No migrations were applied. The database is already up to date.
api-1  | warn: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[60]
api-1  |       Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed. For more information go to https://aka.ms/aspnet/dataprotectionwarning
api-1  | warn: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[35]
api-1  |       No XML encryptor configured. Key {3bdad85d-7fa1-42b3-b00a-ac06f7839150} may be persisted to storage in unencrypted form.
api-1  | warn: Microsoft.AspNetCore.Hosting.Diagnostics[15]
api-1  |       Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
api-1  | info: Microsoft.Hosting.Lifetime[14]
api-1  |       Now listening on: http://[::]:8080
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Application started. Press Ctrl+C to shut down.
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Hosting environment: Development
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Content root path: /app
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (33ms) [Parameters=[@__login_Email_0='?'], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."UserId", t."CreatedAt", t."Email", t."PasswordHash", t."Username", t0."UserId", t0."RoleId", t0."RoleId0", t0."Name"
api-1  |       FROM (
api-1  |           SELECT u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |           FROM "Users" AS u
api-1  |           WHERE u."Email" = @__login_Email_0
api-1  |           LIMIT 1
api-1  |       ) AS t
api-1  |       LEFT JOIN (
api-1  |           SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."Name"
api-1  |           FROM "UserRoles" AS u0
api-1  |           INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
api-1  |       ) AS t0 ON t."UserId" = t0."UserId"
api-1  |       ORDER BY t."UserId", t0."UserId", t0."RoleId"
api-1  | fail: EduShelf.Api.Middleware.ErrorHandlingMiddleware[0]
api-1  |       An unhandled exception has occurred.
api-1  |       System.UnauthorizedAccessException: Invalid credentials.
api-1  |          at EduShelf.Api.Services.UserService.LoginAsync(UserLogin login) in /app/Services/UserService.cs:line 114
api-1  |          at EduShelf.Api.Controllers.UsersController.Login(UserLogin login) in /app/Controllers/UsersController.cs:line 58
api-1  |          at lambda_method166(Closure, Object)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
api-1  |          at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
api-1  |          at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
api-1  |          at EduShelf.Api.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /app/Middleware/ErrorHandlingMiddleware.cs:line 22
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (15ms) [Parameters=[@__login_Email_0='?'], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."UserId", t."CreatedAt", t."Email", t."PasswordHash", t."Username", t0."UserId", t0."RoleId", t0."RoleId0", t0."Name"
api-1  |       FROM (
api-1  |           SELECT u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |           FROM "Users" AS u
api-1  |           WHERE u."Email" = @__login_Email_0
api-1  |           LIMIT 1
api-1  |       ) AS t
api-1  |       LEFT JOIN (
api-1  |           SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."Name"
api-1  |           FROM "UserRoles" AS u0
api-1  |           INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
api-1  |       ) AS t0 ON t."UserId" = t0."UserId"
api-1  |       ORDER BY t."UserId", t0."UserId", t0."RoleId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT d."Id", d."Title", d."FileType", d."CreatedAt", t0."Id", t0."Name", t0."DocumentId", t0."TagId"
api-1  |       FROM "Documents" AS d
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Id", t."Name", d0."DocumentId", d0."TagId"
api-1  |           FROM "DocumentTags" AS d0
api-1  |           INNER JOIN "Tags" AS t ON d0."TagId" = t."Id"
api-1  |       ) AS t0 ON d."Id" = t0."DocumentId"
api-1  |       WHERE d."UserId" = @__userId_0
api-1  |       ORDER BY d."Id", t0."DocumentId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT d."Id", d."Title", d."FileType", d."CreatedAt", t0."Id", t0."Name", t0."DocumentId", t0."TagId"
api-1  |       FROM "Documents" AS d
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Id", t."Name", d0."DocumentId", d0."TagId"
api-1  |           FROM "DocumentTags" AS d0
api-1  |           INNER JOIN "Tags" AS t ON d0."TagId" = t."Id"
api-1  |       ) AS t0 ON d."Id" = t0."DocumentId"
api-1  |       WHERE d."UserId" = @__userId_0
api-1  |       ORDER BY d."Id", t0."DocumentId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."CreatedAt", c."Title", c."UserId", u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |       FROM "ChatSessions" AS c
api-1  |       INNER JOIN "Users" AS u ON c."UserId" = u."UserId"
api-1  |       WHERE c."UserId" = @__userId_0
api-1  |       ORDER BY c."CreatedAt" DESC
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."CreatedAt", c."Title", c."UserId", u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |       FROM "ChatSessions" AS c
api-1  |       INNER JOIN "Users" AS u ON c."UserId" = u."UserId"
api-1  |       WHERE c."UserId" = @__userId_0
api-1  |       ORDER BY c."CreatedAt" DESC
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (14ms) [Parameters=[@__chatSessionId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."CreatedAt", c."Title", c."UserId"
api-1  |       FROM "ChatSessions" AS c
api-1  |       WHERE c."Id" = @__chatSessionId_0 AND c."UserId" = @__userId_1
api-1  |       LIMIT 1
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (33ms) [Parameters=[@__chatSessionId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."ChatSessionId", c."CreatedAt", c."ImageDescription", c."ImagePath", c."Message", c."Response"
api-1  |       FROM "ChatMessages" AS c
api-1  |       WHERE c."ChatSessionId" = @__chatSessionId_0
api-1  |       ORDER BY c."CreatedAt"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (14ms) [Parameters=[@__chatSessionId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."CreatedAt", c."Title", c."UserId"
api-1  |       FROM "ChatSessions" AS c
api-1  |       WHERE c."Id" = @__chatSessionId_0 AND c."UserId" = @__userId_1
api-1  |       LIMIT 1
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (242ms) [Parameters=[@__chatSessionId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT c."Id", c."ChatSessionId", c."CreatedAt", c."ImageDescription", c."ImagePath", c."Message", c."Response"
api-1  |       FROM "ChatMessages" AS c
api-1  |       WHERE c."ChatSessionId" = @__chatSessionId_0
api-1  |       ORDER BY c."CreatedAt"
api-1  | warn: Microsoft.EntityFrameworkCore.Query[20504]
api-1  |       Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT q."Id", q."CreatedAt", q."Title", q."UserId", t."Id", t."QuizId", t."Text", t."Id0", t."IsCorrect", t."QuestionId", t."Text0"
api-1  |       FROM "Quizzes" AS q
api-1  |       LEFT JOIN (
api-1  |           SELECT q0."Id", q0."QuizId", q0."Text", a."Id" AS "Id0", a."IsCorrect", a."QuestionId", a."Text" AS "Text0"
api-1  |           FROM "Questions" AS q0
api-1  |           LEFT JOIN "Answers" AS a ON q0."Id" = a."QuestionId"
api-1  |       ) AS t ON q."Id" = t."QuizId"
api-1  |       WHERE q."UserId" = @__userId_0
api-1  |       ORDER BY q."Id", t."Id"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT q."Id", q."CreatedAt", q."Title", q."UserId", t."Id", t."QuizId", t."Text", t."Id0", t."IsCorrect", t."QuestionId", t."Text0"
api-1  |       FROM "Quizzes" AS q
api-1  |       LEFT JOIN (
api-1  |           SELECT q0."Id", q0."QuizId", q0."Text", a."Id" AS "Id0", a."IsCorrect", a."QuestionId", a."Text" AS "Text0"
api-1  |           FROM "Questions" AS q0
api-1  |           LEFT JOIN "Answers" AS a ON q0."Id" = a."QuestionId"
api-1  |       ) AS t ON q."Id" = t."QuizId"
api-1  |       WHERE q."UserId" = @__userId_0
api-1  |       ORDER BY q."Id", t."Id"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | Received Flashcard DTO: UserId=0, Question=wad, Answer=asfasf
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (13ms) [Parameters=[@__tagName_0='?'], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."Id", t."IsSubject", t."Name"
api-1  |       FROM "Tags" AS t
api-1  |       WHERE t."Name" = @__tagName_0
api-1  |       LIMIT 1
api-1  | fail: Microsoft.EntityFrameworkCore.Database.Command[20102]
api-1  |       Failed executing DbCommand (25ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?'], CommandType='Text', CommandTimeout='30']
api-1  |       INSERT INTO "Flashcards" ("Answer", "CreatedAt", "Question", "UserId")
api-1  |       VALUES (@p0, @p1, @p2, @p3)
api-1  |       RETURNING "Id";
api-1  |       INSERT INTO "Tags" ("IsSubject", "Name")
api-1  |       VALUES (@p4, @p5)
api-1  |       RETURNING "Id";
api-1  | fail: Microsoft.EntityFrameworkCore.Update[10000]
api-1  |       An exception occurred in the database while saving changes for context type 'EduShelf.Api.Data.ApiDbContext'.
api-1  |       Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
api-1  |        ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |       
api-1  |       DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
api-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |         Exception data:
api-1  |           Severity: ERROR
api-1  |           SqlState: 23503
api-1  |           MessageText: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |           Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |           SchemaName: public
api-1  |           TableName: Flashcards
api-1  |           ConstraintName: FK_Flashcards_Users_UserId
api-1  |           File: ri_triggers.c
api-1  |           Line: 2608
api-1  |           Routine: ri_ReportViolation
api-1  |          --- End of inner exception stack trace ---
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |       Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
api-1  |        ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |       
api-1  |       DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
api-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |         Exception data:
api-1  |           Severity: ERROR
api-1  |           SqlState: 23503
api-1  |           MessageText: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |           Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |           SchemaName: public
api-1  |           TableName: Flashcards
api-1  |           ConstraintName: FK_Flashcards_Users_UserId
api-1  |           File: ri_triggers.c
api-1  |           Line: 2608
api-1  |           Routine: ri_ReportViolation
api-1  |          --- End of inner exception stack trace ---
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  | fail: EduShelf.Api.Middleware.ErrorHandlingMiddleware[0]
api-1  |       An unhandled exception has occurred.
api-1  |       Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
api-1  |        ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |       
api-1  |       DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
api-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |         Exception data:
api-1  |           Severity: ERROR
api-1  |           SqlState: 23503
api-1  |           MessageText: insert or update on table "Flashcards" violates foreign key constraint "FK_Flashcards_Users_UserId"
api-1  |           Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
api-1  |           SchemaName: public
api-1  |           TableName: Flashcards
api-1  |           ConstraintName: FK_Flashcards_Users_UserId
api-1  |           File: ri_triggers.c
api-1  |           Line: 2608
api-1  |           Routine: ri_ReportViolation
api-1  |          --- End of inner exception stack trace ---
api-1  |          at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |          at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
api-1  |          at EduShelf.Api.Controllers.FlashcardsController.PostFlashcard(FlashcardCreateDto flashcardDto) in /app/Controllers/FlashcardsController.cs:line 166
api-1  |          at lambda_method523(Closure, Object)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
api-1  |          at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
api-1  |          at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
api-1  |          at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
api-1  |          at EduShelf.Api.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /app/Middleware/ErrorHandlingMiddleware.cs:line 22
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Application is shutting down...
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (107ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT "MigrationId", "ProductVersion"
api-1  |       FROM "__EFMigrationsHistory"
api-1  |       ORDER BY "MigrationId";
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT EXISTS (
api-1  |           SELECT 1 FROM pg_catalog.pg_class c
api-1  |           JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
api-1  |           WHERE n.nspname='public' AND
api-1  |                 c.relname='__EFMigrationsHistory'
api-1  |       )
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT "MigrationId", "ProductVersion"
api-1  |       FROM "__EFMigrationsHistory"
api-1  |       ORDER BY "MigrationId";
api-1  | info: Microsoft.EntityFrameworkCore.Migrations[20405]
api-1  |       No migrations were applied. The database is already up to date.
api-1  | warn: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[60]
api-1  |       Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed. For more information go to https://aka.ms/aspnet/dataprotectionwarning
api-1  | warn: Microsoft.AspNetCore.Hosting.Diagnostics[15]
api-1  |       Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
api-1  | info: Microsoft.Hosting.Lifetime[14]
api-1  |       Now listening on: http://[::]:8080
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Application started. Press Ctrl+C to shut down.
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Hosting environment: Development
api-1  | info: Microsoft.Hosting.Lifetime[0]
api-1  |       Content root path: /app
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (39ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |       FROM "Users" AS u
api-1  |       WHERE u."UserId" = @__p_0
api-1  |       LIMIT 1
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |       FROM "Users" AS u
api-1  |       WHERE u."UserId" = @__p_0
api-1  |       LIMIT 1
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (112ms) [Parameters=[@__login_Email_0='?'], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."UserId", t."CreatedAt", t."Email", t."PasswordHash", t."Username", t0."UserId", t0."RoleId", t0."RoleId0", t0."Name"
api-1  |       FROM (
api-1  |           SELECT u."UserId", u."CreatedAt", u."Email", u."PasswordHash", u."Username"
api-1  |           FROM "Users" AS u
api-1  |           WHERE u."Email" = @__login_Email_0
api-1  |           LIMIT 1
api-1  |       ) AS t
api-1  |       LEFT JOIN (
api-1  |           SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."Name"
api-1  |           FROM "UserRoles" AS u0
api-1  |           INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
api-1  |       ) AS t0 ON t."UserId" = t0."UserId"
api-1  |       ORDER BY t."UserId", t0."UserId", t0."RoleId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT d."Id", d."Title", d."FileType", d."CreatedAt", t0."Id", t0."Name", t0."DocumentId", t0."TagId"
api-1  |       FROM "Documents" AS d
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Id", t."Name", d0."DocumentId", d0."TagId"
api-1  |           FROM "DocumentTags" AS d0
api-1  |           INNER JOIN "Tags" AS t ON d0."TagId" = t."Id"
api-1  |       ) AS t0 ON d."Id" = t0."DocumentId"
api-1  |       WHERE d."UserId" = @__userId_0
api-1  |       ORDER BY d."Id", t0."DocumentId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT d."Id", d."Title", d."FileType", d."CreatedAt", t0."Id", t0."Name", t0."DocumentId", t0."TagId"
api-1  |       FROM "Documents" AS d
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Id", t."Name", d0."DocumentId", d0."TagId"
api-1  |           FROM "DocumentTags" AS d0
api-1  |           INNER JOIN "Tags" AS t ON d0."TagId" = t."Id"
api-1  |       ) AS t0 ON d."Id" = t0."DocumentId"
api-1  |       WHERE d."UserId" = @__userId_0
api-1  |       ORDER BY d."Id", t0."DocumentId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f0."FlashcardId", f0."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           INNER JOIN "Tags" AS t ON f0."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."Id", t."IsSubject", t."Name"
api-1  |       FROM "Tags" AS t
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT t."Id", t."IsSubject", t."Name"
api-1  |       FROM "Tags" AS t
api-1  | info: Microsoft.EntityFrameworkCore.Database.Command[20101]
api-1  |       Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__tagId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
api-1  |       SELECT f."Id", f."UserId", f."Question", f."Answer", f."CreatedAt", t0."Name", t0."FlashcardId", t0."TagId", t0."Id"
api-1  |       FROM "Flashcards" AS f
api-1  |       LEFT JOIN (
api-1  |           SELECT t."Name", f1."FlashcardId", f1."TagId", t."Id"
api-1  |           FROM "FlashcardTags" AS f1
api-1  |           INNER JOIN "Tags" AS t ON f1."TagId" = t."Id"
api-1  |       ) AS t0 ON f."Id" = t0."FlashcardId"
api-1  |       WHERE f."UserId" = @__userId_0 AND EXISTS (
api-1  |           SELECT 1
api-1  |           FROM "FlashcardTags" AS f0
api-1  |           WHERE f."Id" = f0."FlashcardId" AND f0."TagId" = @__tagId_1)
api-1  |       ORDER BY f."Id", t0."FlashcardId", t0."TagId"
